meta:
  isa_name: RV32M
  isa_family: RISC-V
  description: "RV32M multiply/divide extension"
  extends: rv32_base.yaml
<<: *common_rules

# M extension uses R-format; new funct7 patterns denote M ops
formats:
  <<: *riscv_formats

fields:
  # All fields auto-generated from riscv_formats in rv32_base.yaml
  {}

instructions:
  # M extension: multiply and divide (all use R-format with funct7=0b0000001)
  MUL:    { format: R, fixed: { opcode: 0b0110011, funct3: 0b000, funct7: 0b0000001 } }
  MULH:   { format: R, fixed: { opcode: 0b0110011, funct3: 0b001, funct7: 0b0000001 } }
  MULHSU: { format: R, fixed: { opcode: 0b0110011, funct3: 0b010, funct7: 0b0000001 } }
  MULHU:  { format: R, fixed: { opcode: 0b0110011, funct3: 0b011, funct7: 0b0000001 } }
  DIV:    { format: R, fixed: { opcode: 0b0110011, funct3: 0b100, funct7: 0b0000001 } }
  DIVU:   { format: R, fixed: { opcode: 0b0110011, funct3: 0b101, funct7: 0b0000001 } }
  REM:    { format: R, fixed: { opcode: 0b0110011, funct3: 0b110, funct7: 0b0000001 } }
  REMU:   { format: R, fixed: { opcode: 0b0110011, funct3: 0b111, funct7: 0b0000001 } }